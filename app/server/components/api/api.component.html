<link rel="import" href="../../../../node_modules/@polymer/polymer/polymer.html">

<link rel="import" href="../../../../node_modules/express-web-components/express-app.html">
<link rel="import" href="../../../../node_modules/express-web-components/express-middleware.html">
<link rel="import" href="../../../../node_modules/express-web-components/express-router.html">

<link rel="import" href="../bears/bears.component.html">
<link rel="import" href="../bears-id/bears-id.component.html">

<dom-module id="na-api">
    <template>
        <express-middleware callback="[[allMW]]"></express-middleware>

        <express-router path="/bears">
            <na-bears></na-bears>
        </express-router>

        <express-router path="/bears/:id">
            <na-bears-id></na-bears-id>
        </express-router>
    </template>

    <script>
        class APIComponent {
            beforeReady() {
                this.is = 'na-api';
            }

            get behaviors() {
                return [ExpressParentBehavior];
            }

            ready() {
                // middleware to use for all requests with /api prefix
                this.allMW = (req, res, next) => {
                    // do logging
                	console.log('Something is happening.');
                	next();
                };
            }
        }

        Polymer(APIComponent);
    </script>
</dom-module>
